{"ast":null,"code":"import _toConsumableArray from\"/Users/richardmcgirt/Desktop/Warrenty2-/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _createForOfIteratorHelper from\"/Users/richardmcgirt/Desktop/Warrenty2-/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _regeneratorRuntime from\"/Users/richardmcgirt/Desktop/Warrenty2-/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _slicedToArray from\"/Users/richardmcgirt/Desktop/Warrenty2-/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _asyncToGenerator from\"/Users/richardmcgirt/Desktop/Warrenty2-/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useState,useEffect}from'react';import'./App.css';import{useSession,useSupabaseClient,useSessionContext}from'@supabase/auth-helpers-react';// Debounce function to avoid rapid API calls\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function debounce(func,wait){var timeout;return function executedFunction(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}var later=function later(){clearTimeout(timeout);func.apply(void 0,args);};clearTimeout(timeout);timeout=setTimeout(later,wait);};}// Fetch added records from Airtable\nfunction fetchAddedRecordsFromAirtable(){return _fetchAddedRecordsFromAirtable.apply(this,arguments);}// Fetch failed records from Airtable\nfunction _fetchAddedRecordsFromAirtable(){_fetchAddedRecordsFromAirtable=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var response,data;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return fetch('https://api.airtable.com/v0/appO21PVRA4Qa087I/tbl6EeKPsNuEvt5yJ',{headers:{Authorization:'Bearer patXTUS9m8os14OO1.6a81b7bc4dd88871072fe71f28b568070cc79035bc988de3d4228d52239c8238'}});case 3:response=_context3.sent;_context3.next=6;return response.json();case 6:data=_context3.sent;return _context3.abrupt(\"return\",data.records.filter(function(record){return record.fields['Status']==='Added';}).map(function(record){return record.fields['YourRecordFieldName'];}));case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](0);console.error('Error fetching added records from Airtable:',_context3.t0);return _context3.abrupt(\"return\",[]);case 14:case\"end\":return _context3.stop();}},_callee3,null,[[0,10]]);}));return _fetchAddedRecordsFromAirtable.apply(this,arguments);}function fetchFailedRecordsFromAirtable(){return _fetchFailedRecordsFromAirtable.apply(this,arguments);}// Helper function to get a greeting based on the time of day\nfunction _fetchFailedRecordsFromAirtable(){_fetchFailedRecordsFromAirtable=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){var response,data;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return fetch('https://api.airtable.com/v0/appO21PVRA4Qa087I/tbl6EeKPsNuEvt5yJ',{headers:{Authorization:'Bearer patXTUS9m8os14OO1.6a81b7bc4dd88871072fe71f28b568070cc79035bc988de3d4228d52239c8238'}});case 3:response=_context4.sent;_context4.next=6;return response.json();case 6:data=_context4.sent;return _context4.abrupt(\"return\",data.records.filter(function(record){return record.fields['Status']==='Failed';}).map(function(record){return record.fields['YourRecordFieldName'];}));case 10:_context4.prev=10;_context4.t0=_context4[\"catch\"](0);console.error('Error fetching failed records from Airtable:',_context4.t0);return _context4.abrupt(\"return\",[]);case 14:case\"end\":return _context4.stop();}},_callee4,null,[[0,10]]);}));return _fetchFailedRecordsFromAirtable.apply(this,arguments);}function getGreeting(){var currentHour=new Date().getHours();if(currentHour<12){return\"Good morning\";}else if(currentHour<18){return\"Good afternoon\";}else{return\"Good evening\";}}// Function to create a Google Calendar event\nfunction createGoogleCalendarEvent(_x,_x2,_x3,_x4,_x5){return _createGoogleCalendarEvent.apply(this,arguments);}// Function to update Airtable with the Google Event ID\nfunction _createGoogleCalendarEvent(){_createGoogleCalendarEvent=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(event,calendarId,session,signOut,setRateLimitInfo){var url,pictureUrlsDescription,newEvent,response,remaining,limit,reset,data;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:console.log('Attempting to create a new Google Calendar event:',event);if(session.provider_token){_context5.next=5;break;}console.error('No valid session token available. Logging out.');signOut();return _context5.abrupt(\"return\",null);case 5:url=\"https://www.googleapis.com/calendar/v3/calendars/\".concat(calendarId,\"/events\");pictureUrlsDescription=event.pictureUrls.length>0?'Pictures of Issue:\\n'+event.pictureUrls.join('\\n'):'No pictures provided.';newEvent={summary:event.title,description:\"\\n      \".concat(event.description?event.description+'\\n':'',\"\\n      Homeowner Name: \").concat(event.homeownerName,\"\\n      Lot Number: \").concat(event.lotNumber,\"\\n      Community/Neighborhood: \").concat(event.community,\"\\n      Contact Email: \").concat(event.contactEmail,\"\\n      Calendar Link: \").concat(event.calendarLink?event.calendarLink:'Not Provided',\"\\n      \").concat(pictureUrlsDescription,\"\\n    \"),start:{dateTime:event.start.toISOString()},end:{dateTime:event.end.toISOString()},location:\"\".concat(event.streetAddress,\", \").concat(event.city,\", \").concat(event.state,\", \").concat(event.zipCode)};console.log('New event data:',newEvent);_context5.prev=9;_context5.next=12;return fetch(url,{method:'POST',headers:{'Authorization':'Bearer '+session.provider_token,'Content-Type':'application/json'},body:JSON.stringify(newEvent)});case 12:response=_context5.sent;// Capture rate limit info from headers\nremaining=response.headers.get('X-RateLimit-Remaining');limit=response.headers.get('X-RateLimit-Limit');reset=response.headers.get('X-RateLimit-Reset');setRateLimitInfo({remaining:remaining,limit:limit,reset:reset});_context5.next=19;return response.json();case 19:data=_context5.sent;console.log('Google Calendar creation response:',data);if(!data.error){_context5.next=27;break;}console.error('Error creating event:',data.error);if(data.error.code===401){console.error('Unauthorized - Logging out');signOut();// Logout if unauthorized\n}return _context5.abrupt(\"return\",null);case 27:console.log('New event successfully created:',data);return _context5.abrupt(\"return\",data.id);case 29:_context5.next=35;break;case 31:_context5.prev=31;_context5.t0=_context5[\"catch\"](9);console.error('Error during fetch request:',_context5.t0);return _context5.abrupt(\"return\",null);case 35:case\"end\":return _context5.stop();}},_callee5,null,[[9,31]]);}));return _createGoogleCalendarEvent.apply(this,arguments);}function updateAirtableWithGoogleEventId(_x6,_x7){return _updateAirtableWithGoogleEventId.apply(this,arguments);}// Fetch events from Airtable\nfunction _updateAirtableWithGoogleEventId(){_updateAirtableWithGoogleEventId=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(airtableRecordId,googleEventId){var url,updateData,response,data;return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:console.log('Updating Airtable with new Google Event ID:',googleEventId);url=\"https://api.airtable.com/v0/appO21PVRA4Qa087I/tbl6EeKPsNuEvt5yJ/\".concat(airtableRecordId);updateData={fields:{GoogleEventId:googleEventId}};console.log('Airtable update data:',updateData);_context6.prev=4;_context6.next=7;return fetch(url,{method:'PATCH',headers:{'Authorization':'Bearer patXTUS9m8os14OO1.6a81b7bc4dd88871072fe71f28b568070cc79035bc988de3d4228d52239c8238','Content-Type':'application/json'},body:JSON.stringify(updateData)});case 7:response=_context6.sent;_context6.next=10;return response.json();case 10:data=_context6.sent;console.log('Airtable API response for update:',data);if(data.error){console.error('Error updating Airtable with Google Event ID:',data.error);}else{console.log('Airtable record successfully updated:',data);}_context6.next=18;break;case 15:_context6.prev=15;_context6.t0=_context6[\"catch\"](4);console.error('Error during fetch request:',_context6.t0);case 18:case\"end\":return _context6.stop();}},_callee6,null,[[4,15]]);}));return _updateAirtableWithGoogleEventId.apply(this,arguments);}function fetchAirtableEvents(){return _fetchAirtableEvents.apply(this,arguments);}// Function to check for duplicate events in Google Calendar\nfunction _fetchAirtableEvents(){_fetchAirtableEvents=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(){var retryCount,url,maxRetries,response,retryAfter,waitTime,data,_args7=arguments;return _regeneratorRuntime().wrap(function _callee7$(_context7){while(1)switch(_context7.prev=_context7.next){case 0:retryCount=_args7.length>0&&_args7[0]!==undefined?_args7[0]:0;console.log('Fetching events from Airtable');url=\"https://api.airtable.com/v0/appO21PVRA4Qa087I/tbl6EeKPsNuEvt5yJ\";maxRetries=1;_context7.prev=4;_context7.next=7;return fetch(url,{headers:{'Authorization':'Bearer patXTUS9m8os14OO1.6a81b7bc4dd88871072fe71f28b568070cc79035bc988de3d4228d52239c8238','Content-Type':'application/json'}});case 7:response=_context7.sent;if(response.ok){_context7.next=23;break;}if(!(response.status===429)){_context7.next=22;break;}retryAfter=response.headers.get('Retry-After');waitTime=retryAfter?parseInt(retryAfter)*1000:Math.pow(2,retryCount)*1000;console.warn(\"Rate limit hit. Retrying after \".concat(waitTime,\"ms...\"));if(!(retryCount<maxRetries)){_context7.next=19;break;}_context7.next=16;return new Promise(function(resolve){return setTimeout(resolve,waitTime);});case 16:return _context7.abrupt(\"return\",fetchAirtableEvents(retryCount+1));case 19:throw new Error('Max retries exceeded');case 20:_context7.next=23;break;case 22:throw new Error(\"HTTP error! status: \".concat(response.status));case 23:_context7.next=25;return response.json();case 25:data=_context7.sent;console.log('Fetched data from Airtable:',data);return _context7.abrupt(\"return\",data.records.filter(function(record){return record.fields['Calendar Event Name']&&record.fields['startDate']&&record.fields['endDate'];}).map(function(record){var _record$fields$Pictur;return{id:record.id,title:record.fields['Calendar Event Name']||\"Untitled Event\",start:new Date(record.fields['startDate']),end:new Date(record.fields['endDate']),description:record.fields['Billable Reason (If Billable)']||'',branch:record.fields['b']||'Unknown',homeownerName:record.fields['Homeowner Name']||'Unknown',lotNumber:record.fields['Lot Number']||'Unknown',community:record.fields['Community/Neighborhood']||'Unknown',contactEmail:record.fields['Contact Email']||'Unknown',calendarLink:record.fields['Calendar Link']||'',pictureUrls:((_record$fields$Pictur=record.fields['Picture(s) of Issue'])===null||_record$fields$Pictur===void 0?void 0:_record$fields$Pictur.map(function(pic){return pic.url;}))||[],streetAddress:record.fields['Street Address']||'Unknown',city:record.fields['City']||'Unknown',state:record.fields['State']||'Unknown',zipCode:record.fields['Zip Code']||'Unknown',googleEventId:record.fields['GoogleEventId']||null};}));case 30:_context7.prev=30;_context7.t0=_context7[\"catch\"](4);console.error('Error fetching events from Airtable:',_context7.t0);if(!(retryCount<maxRetries)){_context7.next=38;break;}console.log(\"Retrying fetch attempt \".concat(retryCount+1,\" of \").concat(maxRetries,\"...\"));return _context7.abrupt(\"return\",fetchAirtableEvents(retryCount+1));case 38:throw _context7.t0;case 39:case\"end\":return _context7.stop();}},_callee7,null,[[4,30]]);}));return _fetchAirtableEvents.apply(this,arguments);}function checkForDuplicateEvent(_x8,_x9,_x10){return _checkForDuplicateEvent.apply(this,arguments);}// Function to introduce a delay\nfunction _checkForDuplicateEvent(){_checkForDuplicateEvent=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(event,calendarId,session){var url,response,data;return _regeneratorRuntime().wrap(function _callee8$(_context8){while(1)switch(_context8.prev=_context8.next){case 0:url=\"https://www.googleapis.com/calendar/v3/calendars/\".concat(calendarId,\"/events?timeMin=\").concat(event.start.toISOString(),\"&timeMax=\").concat(event.end.toISOString());_context8.next=3;return fetch(url,{headers:{'Authorization':'Bearer '+session.provider_token}});case 3:response=_context8.sent;_context8.next=6;return response.json();case 6:data=_context8.sent;if(!data.items){_context8.next=9;break;}return _context8.abrupt(\"return\",data.items.some(function(existingEvent){return existingEvent.summary===event.title&&existingEvent.location===\"\".concat(event.streetAddress,\", \").concat(event.city,\", \").concat(event.state,\", \").concat(event.zipCode);}));case 9:return _context8.abrupt(\"return\",false);case 10:case\"end\":return _context8.stop();}},_callee8);}));return _checkForDuplicateEvent.apply(this,arguments);}function sleep(ms){return new Promise(function(resolve){return setTimeout(resolve,ms);});}// Function to populate Google Calendar with records from Airtable\nfunction populateGoogleCalendarWithAirtableRecords(_x11,_x12,_x13,_x14,_x15,_x16,_x17){return _populateGoogleCalendarWithAirtableRecords.apply(this,arguments);}// Component to display each calendar section with countdown\nfunction _populateGoogleCalendarWithAirtableRecords(){_populateGoogleCalendarWithAirtableRecords=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee9(calendarId,calendarName,session,signOut,setAddedRecords,setFailedRecords,setRateLimitInfo){var airtableEvents,added,failed,_iterator2,_step2,event,isDuplicate,googleEventId;return _regeneratorRuntime().wrap(function _callee9$(_context9){while(1)switch(_context9.prev=_context9.next){case 0:console.log(\"Populating Google Calendar (\".concat(calendarName,\") with Airtable records...\"));_context9.next=3;return fetchAirtableEvents();case 3:airtableEvents=_context9.sent;added=[];failed=[];_iterator2=_createForOfIteratorHelper(airtableEvents);_context9.prev=7;_iterator2.s();case 9:if((_step2=_iterator2.n()).done){_context9.next=39;break;}event=_step2.value;if(!(event.branch.toLowerCase()==='unknown'||event.branch.toLowerCase()!==calendarName.toLowerCase())){_context9.next=14;break;}console.log(\"Skipping event \\\"\".concat(event.title,\"\\\" due to branch \\\"\").concat(event.branch,\"\\\" not matching \\\"\").concat(calendarName,\"\\\" or being \\\"Unknown\\\"\"));return _context9.abrupt(\"continue\",37);case 14:if(!event.googleEventId){_context9.next=17;break;}console.log(\"Skipping already synced event: \".concat(event.title));return _context9.abrupt(\"continue\",37);case 17:_context9.next=19;return checkForDuplicateEvent(event,calendarId,session);case 19:isDuplicate=_context9.sent;if(!isDuplicate){_context9.next=24;break;}console.log(\"Duplicate event found: \\\"\".concat(event.title,\"\\\". Skipping...\"));failed.push(event.title);return _context9.abrupt(\"continue\",37);case 24:_context9.next=26;return createGoogleCalendarEvent(event,calendarId,session,signOut,setRateLimitInfo);case 26:googleEventId=_context9.sent;if(!googleEventId){_context9.next=34;break;}console.log('New Google Event ID created:',googleEventId);_context9.next=31;return updateAirtableWithGoogleEventId(event.id,googleEventId);case 31:added.push(event.title);_context9.next=35;break;case 34:failed.push(event.title);case 35:_context9.next=37;return sleep(1000);case 37:_context9.next=9;break;case 39:_context9.next=44;break;case 41:_context9.prev=41;_context9.t0=_context9[\"catch\"](7);_iterator2.e(_context9.t0);case 44:_context9.prev=44;_iterator2.f();return _context9.finish(44);case 47:setAddedRecords(function(prev){return[].concat(_toConsumableArray(prev),added);});setFailedRecords(function(prev){return[].concat(_toConsumableArray(prev),failed);});console.log(\"Finished populating Google Calendar (\".concat(calendarName,\") with Airtable records.\"));case 50:case\"end\":return _context9.stop();}},_callee9,null,[[7,41,44,47]]);}));return _populateGoogleCalendarWithAirtableRecords.apply(this,arguments);}function CalendarSection(_ref){var calendarId=_ref.calendarId,calendarName=_ref.calendarName,session=_ref.session,signOut=_ref.signOut,setAddedRecords=_ref.setAddedRecords,setFailedRecords=_ref.setFailedRecords,setRateLimitInfo=_ref.setRateLimitInfo;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),lastSyncTime=_useState2[0],setLastSyncTime=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),timeUntilNextSync=_useState4[0],setTimeUntilNextSync=_useState4[1];useEffect(function(){var calculateTimeUntilNextSync=function calculateTimeUntilNextSync(){var now=new Date();if(lastSyncTime){var elapsed=now-lastSyncTime;var remainingTime=450000-elapsed;// 450,000 ms = 7.5 minutes\nsetTimeUntilNextSync(Math.max(0,remainingTime));}};var syncEvents=function syncEvents(){var now=new Date();// Calculate time since last sync\nif(lastSyncTime&&now-lastSyncTime<450000){calculateTimeUntilNextSync();return;}if(session){if(!session.provider_token){console.error('No valid session token found. Logging out.');signOut();return;}populateGoogleCalendarWithAirtableRecords(calendarId,calendarName,session,signOut,setAddedRecords,setFailedRecords,setRateLimitInfo).then(function(){console.log(\"Finished syncing Airtable events to Google Calendar (\".concat(calendarName,\")\"));setLastSyncTime(new Date());// Update last sync time\nsetTimeUntilNextSync(450000);// Reset countdown\n}).catch(function(error){return console.error(\"Error syncing Airtable to Google Calendar (\".concat(calendarName,\"):\"),error);});}};// Run syncEvents immediately when the component mounts\nsyncEvents();// Set up an interval to run syncEvents every 6.6 minutes (400000 ms)\nvar intervalId=setInterval(syncEvents,400000);// Update countdown every second\nvar countdownInterval=setInterval(function(){calculateTimeUntilNextSync();},1000);// Clear the intervals when the component unmounts\nreturn function(){clearInterval(intervalId);clearInterval(countdownInterval);};},[session,signOut,calendarId,calendarName,setAddedRecords,setFailedRecords,setRateLimitInfo,lastSyncTime]);// Convert milliseconds to mm:ss format\nvar formatTime=function formatTime(ms){var totalSeconds=Math.floor(ms/1000);var minutes=Math.floor(totalSeconds/60);var seconds=totalSeconds%60;return\"\".concat(String(minutes).padStart(2,'0'),\":\").concat(String(seconds).padStart(2,'0'));};return/*#__PURE__*/_jsxs(\"div\",{className:\"calendar-item\",children:[/*#__PURE__*/_jsx(\"h2\",{children:calendarName}),timeUntilNextSync>0?/*#__PURE__*/_jsxs(\"p\",{children:[\"Next sync available in: \",formatTime(timeUntilNextSync)]}):/*#__PURE__*/_jsx(\"p\",{children:\"Ready to sync!\"})]});}// Main App component\nfunction App(){var session=useSession();var supabase=useSupabaseClient();var _useSessionContext=useSessionContext(),isLoading=_useSessionContext.isLoading;var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),addedRecords=_useState6[0],setAddedRecords=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),failedRecords=_useState8[0],setFailedRecords=_useState8[1];var _useState9=useState({remaining:null,limit:null,reset:null}),_useState10=_slicedToArray(_useState9,2),rateLimitInfo=_useState10[0],setRateLimitInfo=_useState10[1];useEffect(function(){// Fetch existing records from Airtable or another source if needed\nfunction fetchExistingRecords(){return _fetchExistingRecords.apply(this,arguments);}function _fetchExistingRecords(){_fetchExistingRecords=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var existingAddedRecords,existingFailedRecords;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetchAddedRecordsFromAirtable();case 2:existingAddedRecords=_context.sent;_context.next=5;return fetchFailedRecordsFromAirtable();case 5:existingFailedRecords=_context.sent;setAddedRecords(existingAddedRecords);setFailedRecords(existingFailedRecords);case 8:case\"end\":return _context.stop();}},_callee);}));return _fetchExistingRecords.apply(this,arguments);}fetchExistingRecords();},[]);var calendarInfo=[{id:'c_d113e252e0e5c8cfbf17a13149707a30d3c0fbeeff1baaac7a46940c2cc448ca@group.calendar.google.com',name:'Charleston'},{id:'c_03867438b82e5dfd8d4d3b6096c8eb1c715425fa012054cc95f8dea7ef41c79b@group.calendar.google.com',name:'Greensboro'},{id:'c_ad562073f4db2c47279af5aa40e53fc2641b12ad2497ccd925feb220a0f1abee@group.calendar.google.com',name:'Myrtle Beach'},{id:'c_45db4e963c3363676038697855d7aacfd1075da441f9308e44714768d4a4f8de@group.calendar.google.com',name:'Wilmington'},{id:'https://calendar.google.com/calendar/embed?src=c_0476130ac741b9c58b404c737a8068a8b1b06ba1de2a84cff08c5d15ced54edf%40group.calendar.google.com&ctz=America%2FToronto',name:'Grenville'},{id:'https://calendar.google.com/calendar/embed?src=c_df033dd6c81bb3cbb5c6fdfd58dd2931e145e061b8a04ea0c13c79963cb6d515%40group.calendar.google.com&ctz=America%2FToronto',name:'Columbia'},{id:'warranty@vanirinstalledsales.com',name:'Raleigh'}].sort(function(a,b){return a.name.localeCompare(b.name);});var handleManualSync=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var _iterator,_step,calendar;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(session){_context2.next=2;break;}return _context2.abrupt(\"return\");case 2:_iterator=_createForOfIteratorHelper(calendarInfo);_context2.prev=3;_iterator.s();case 5:if((_step=_iterator.n()).done){_context2.next=11;break;}calendar=_step.value;_context2.next=9;return populateGoogleCalendarWithAirtableRecords(calendar.id,calendar.name,session,function(){return supabase.auth.signOut();},setAddedRecords,setFailedRecords,setRateLimitInfo);case 9:_context2.next=5;break;case 11:_context2.next=16;break;case 13:_context2.prev=13;_context2.t0=_context2[\"catch\"](3);_iterator.e(_context2.t0);case 16:_context2.prev=16;_iterator.f();return _context2.finish(16);case 19:case\"end\":return _context2.stop();}},_callee2,null,[[3,13,16,19]]);}));return function handleManualSync(){return _ref2.apply(this,arguments);};}();if(isLoading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Warranty Calendar\"}),/*#__PURE__*/_jsx(\"div\",{style:{width:\"100%\",margin:\"0 auto\"},children:session?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[getGreeting(),\" \",session.user.email]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"calendar-grid\",children:calendarInfo.map(function(calendar){return/*#__PURE__*/_jsx(CalendarSection,{calendarId:calendar.id,calendarName:calendar.name,session:session,signOut:function signOut(){return supabase.auth.signOut();},setAddedRecords:setAddedRecords,setFailedRecords:setFailedRecords,setRateLimitInfo:setRateLimitInfo},calendar.id);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"records-summary\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Records Summary\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"added-records\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Successfully Added Records:\"}),addedRecords.length>0?/*#__PURE__*/_jsx(\"ul\",{children:addedRecords.map(function(record,index){return/*#__PURE__*/_jsx(\"li\",{children:record},index);})}):/*#__PURE__*/_jsx(\"p\",{children:\"No records added.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"failed-records\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Failed to Add Records:\"}),failedRecords.length>0?/*#__PURE__*/_jsx(\"ul\",{children:failedRecords.map(function(record,index){return/*#__PURE__*/_jsx(\"li\",{children:record},index);})}):/*#__PURE__*/_jsx(\"p\",{children:\"No records failed.\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rate-limit-info\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Google Calendar API Rate Limit Information:\"}),rateLimitInfo.limit!==null?/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsxs(\"li\",{children:[\"Limit: \",rateLimitInfo.limit]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Remaining: \",rateLimitInfo.remaining]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Reset Time: \",new Date(rateLimitInfo.reset*1000).toLocaleTimeString()]})]}):/*#__PURE__*/_jsx(\"p\",{children:\"No rate limit information available.\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleManualSync,children:\"Sync Data Now\"}),/*#__PURE__*/_jsx(\"p\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return supabase.auth.signOut();},children:\"Sign Out\"})]}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return supabase.auth.signInWithOAuth({provider:'google',options:{scopes:'https://www.googleapis.com/auth/calendar'}});},children:\"Sign In With Google\"})})})]})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","useSession","useSupabaseClient","useSessionContext","debounce","func","wait","timeout","executedFunction","args","later","clearTimeout","setTimeout","fetchAddedRecordsFromAirtable","fetch","headers","Authorization","response","json","data","records","filter","record","fields","map","console","error","fetchFailedRecordsFromAirtable","getGreeting","currentHour","Date","getHours","createGoogleCalendarEvent","event","calendarId","session","signOut","setRateLimitInfo","log","provider_token","url","pictureUrlsDescription","pictureUrls","length","join","newEvent","summary","title","description","homeownerName","lotNumber","community","contactEmail","calendarLink","start","dateTime","toISOString","end","location","streetAddress","city","state","zipCode","method","body","JSON","stringify","remaining","get","limit","reset","code","id","updateAirtableWithGoogleEventId","airtableRecordId","googleEventId","updateData","GoogleEventId","fetchAirtableEvents","retryCount","maxRetries","ok","status","retryAfter","waitTime","parseInt","Math","pow","warn","Promise","resolve","Error","branch","pic","checkForDuplicateEvent","items","some","existingEvent","sleep","ms","populateGoogleCalendarWithAirtableRecords","calendarName","setAddedRecords","setFailedRecords","airtableEvents","added","failed","toLowerCase","isDuplicate","push","prev","CalendarSection","lastSyncTime","setLastSyncTime","timeUntilNextSync","setTimeUntilNextSync","calculateTimeUntilNextSync","now","elapsed","remainingTime","max","syncEvents","then","catch","intervalId","setInterval","countdownInterval","clearInterval","formatTime","totalSeconds","floor","minutes","seconds","String","padStart","App","supabase","isLoading","addedRecords","failedRecords","rateLimitInfo","fetchExistingRecords","existingAddedRecords","existingFailedRecords","calendarInfo","name","sort","a","b","localeCompare","handleManualSync","calendar","auth","width","margin","user","email","index","toLocaleTimeString","signInWithOAuth","provider","options","scopes"],"sources":["/Users/richardmcgirt/Desktop/Warrenty2-/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport { useSession, useSupabaseClient, useSessionContext } from '@supabase/auth-helpers-react';\n\n// Debounce function to avoid rapid API calls\nfunction debounce(func, wait) {\n  let timeout;\n  return function executedFunction(...args) {\n    const later = () => {\n      clearTimeout(timeout);\n      func(...args);\n    };\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n  };\n}\n\n// Fetch added records from Airtable\nasync function fetchAddedRecordsFromAirtable() {\n  try {\n    const response = await fetch('https://api.airtable.com/v0/appO21PVRA4Qa087I/tbl6EeKPsNuEvt5yJ', {\n      headers: {\n        Authorization: 'Bearer patXTUS9m8os14OO1.6a81b7bc4dd88871072fe71f28b568070cc79035bc988de3d4228d52239c8238'\n      }\n    });\n\n    const data = await response.json();\n    return data.records\n      .filter(record => record.fields['Status'] === 'Added')\n      .map(record => record.fields['YourRecordFieldName']);\n  } catch (error) {\n    console.error('Error fetching added records from Airtable:', error);\n    return [];\n  }\n}\n\n// Fetch failed records from Airtable\nasync function fetchFailedRecordsFromAirtable() {\n  try {\n    const response = await fetch('https://api.airtable.com/v0/appO21PVRA4Qa087I/tbl6EeKPsNuEvt5yJ', {\n      headers: {\n        Authorization: 'Bearer patXTUS9m8os14OO1.6a81b7bc4dd88871072fe71f28b568070cc79035bc988de3d4228d52239c8238'\n      }\n    });\n\n    const data = await response.json();\n    return data.records\n      .filter(record => record.fields['Status'] === 'Failed')\n      .map(record => record.fields['YourRecordFieldName']);\n  } catch (error) {\n    console.error('Error fetching failed records from Airtable:', error);\n    return [];\n  }\n}\n\n// Helper function to get a greeting based on the time of day\nfunction getGreeting() {\n  const currentHour = new Date().getHours();\n  if (currentHour < 12) {\n    return \"Good morning\";\n  } else if (currentHour < 18) {\n    return \"Good afternoon\";\n  } else {\n    return \"Good evening\";\n  }\n}\n\n// Function to create a Google Calendar event\nasync function createGoogleCalendarEvent(event, calendarId, session, signOut, setRateLimitInfo) {\n  console.log('Attempting to create a new Google Calendar event:', event);\n\n  if (!session.provider_token) {\n    console.error('No valid session token available. Logging out.');\n    signOut();\n    return null;\n  }\n\n  const url = `https://www.googleapis.com/calendar/v3/calendars/${calendarId}/events`;\n\n  const pictureUrlsDescription = event.pictureUrls.length > 0 \n    ? 'Pictures of Issue:\\n' + event.pictureUrls.join('\\n')\n    : 'No pictures provided.';\n\n  const newEvent = {\n    summary: event.title,\n    description: `\n      ${event.description ? event.description + '\\n' : ''}\n      Homeowner Name: ${event.homeownerName}\n      Lot Number: ${event.lotNumber}\n      Community/Neighborhood: ${event.community}\n      Contact Email: ${event.contactEmail}\n      Calendar Link: ${event.calendarLink ? event.calendarLink : 'Not Provided'}\n      ${pictureUrlsDescription}\n    `,\n    start: { dateTime: event.start.toISOString() },\n    end: { dateTime: event.end.toISOString() },\n    location: `${event.streetAddress}, ${event.city}, ${event.state}, ${event.zipCode}`,\n  };\n\n  console.log('New event data:', newEvent);\n\n  try {\n    const response = await fetch(url, {\n      method: 'POST',\n      headers: {\n        'Authorization': 'Bearer ' + session.provider_token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(newEvent)\n    });\n\n    // Capture rate limit info from headers\n    const remaining = response.headers.get('X-RateLimit-Remaining');\n    const limit = response.headers.get('X-RateLimit-Limit');\n    const reset = response.headers.get('X-RateLimit-Reset');\n    setRateLimitInfo({ remaining, limit, reset });\n\n    const data = await response.json();\n    console.log('Google Calendar creation response:', data);\n    if (data.error) {\n      console.error('Error creating event:', data.error);\n      if (data.error.code === 401) {\n        console.error('Unauthorized - Logging out');\n        signOut(); // Logout if unauthorized\n      }\n      return null;\n    } else {\n      console.log('New event successfully created:', data);\n      return data.id;\n    }\n  } catch (error) {\n    console.error('Error during fetch request:', error);\n    return null;\n  }\n}\n\n// Function to update Airtable with the Google Event ID\nasync function updateAirtableWithGoogleEventId(airtableRecordId, googleEventId) {\n  console.log('Updating Airtable with new Google Event ID:', googleEventId);\n\n  const url = `https://api.airtable.com/v0/appO21PVRA4Qa087I/tbl6EeKPsNuEvt5yJ/${airtableRecordId}`;\n  const updateData = {\n    fields: {\n      GoogleEventId: googleEventId\n    }\n  };\n\n  console.log('Airtable update data:', updateData);\n\n  try {\n    const response = await fetch(url, {\n      method: 'PATCH',\n      headers: {\n        'Authorization': 'Bearer patXTUS9m8os14OO1.6a81b7bc4dd88871072fe71f28b568070cc79035bc988de3d4228d52239c8238',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(updateData)\n    });\n\n    const data = await response.json();\n    console.log('Airtable API response for update:', data);\n    if (data.error) {\n      console.error('Error updating Airtable with Google Event ID:', data.error);\n    } else {\n      console.log('Airtable record successfully updated:', data);\n    }\n  } catch (error) {\n    console.error('Error during fetch request:', error);\n  }\n}\n\n// Fetch events from Airtable\nasync function fetchAirtableEvents(retryCount = 0) {\n  console.log('Fetching events from Airtable');\n\n  const url = `https://api.airtable.com/v0/appO21PVRA4Qa087I/tbl6EeKPsNuEvt5yJ`;\n  const maxRetries = 1;\n\n  try {\n    const response = await fetch(url, {\n      headers: {\n        'Authorization': 'Bearer patXTUS9m8os14OO1.6a81b7bc4dd88871072fe71f28b568070cc79035bc988de3d4228d52239c8238',\n        'Content-Type': 'application/json'\n      }\n    });\n\n    if (!response.ok) {\n      if (response.status === 429) {\n        const retryAfter = response.headers.get('Retry-After');\n        const waitTime = retryAfter ? parseInt(retryAfter) * 1000 : Math.pow(2, retryCount) * 1000;\n\n        console.warn(`Rate limit hit. Retrying after ${waitTime}ms...`);\n\n        if (retryCount < maxRetries) {\n          await new Promise(resolve => setTimeout(resolve, waitTime));\n          return fetchAirtableEvents(retryCount + 1);\n        } else {\n          throw new Error('Max retries exceeded');\n        }\n      } else {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n    }\n\n    const data = await response.json();\n    console.log('Fetched data from Airtable:', data);\n\n    return data.records\n      .filter(record => record.fields['Calendar Event Name'] && record.fields['startDate'] && record.fields['endDate'])\n      .map(record => ({\n        id: record.id,\n        title: record.fields['Calendar Event Name'] || \"Untitled Event\",\n        start: new Date(record.fields['startDate']),\n        end: new Date(record.fields['endDate']),\n        description: record.fields['Billable Reason (If Billable)'] || '',\n        branch: record.fields['b'] || 'Unknown',\n        homeownerName: record.fields['Homeowner Name'] || 'Unknown',\n        lotNumber: record.fields['Lot Number'] || 'Unknown',\n        community: record.fields['Community/Neighborhood'] || 'Unknown',\n        contactEmail: record.fields['Contact Email'] || 'Unknown',\n        calendarLink: record.fields['Calendar Link'] || '',\n        pictureUrls: record.fields['Picture(s) of Issue']?.map(pic => pic.url) || [],\n        streetAddress: record.fields['Street Address'] || 'Unknown',\n        city: record.fields['City'] || 'Unknown',\n        state: record.fields['State'] || 'Unknown',\n        zipCode: record.fields['Zip Code'] || 'Unknown',\n        googleEventId: record.fields['GoogleEventId'] || null,\n      }));\n\n  } catch (error) {\n    console.error('Error fetching events from Airtable:', error);\n\n    if (retryCount < maxRetries) {\n      console.log(`Retrying fetch attempt ${retryCount + 1} of ${maxRetries}...`);\n      return fetchAirtableEvents(retryCount + 1);\n    } else {\n      throw error;\n    }\n  }\n}\n\n// Function to check for duplicate events in Google Calendar\nasync function checkForDuplicateEvent(event, calendarId, session) {\n  const url = `https://www.googleapis.com/calendar/v3/calendars/${calendarId}/events?timeMin=${event.start.toISOString()}&timeMax=${event.end.toISOString()}`;\n\n  const response = await fetch(url, {\n    headers: {\n      'Authorization': 'Bearer ' + session.provider_token,\n    },\n  });\n\n  const data = await response.json();\n\n  if (data.items) {\n    return data.items.some(existingEvent =>\n      existingEvent.summary === event.title &&\n      existingEvent.location === `${event.streetAddress}, ${event.city}, ${event.state}, ${event.zipCode}`\n    );\n  }\n\n  return false;\n}\n\n// Function to introduce a delay\nfunction sleep(ms) {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n\n// Function to populate Google Calendar with records from Airtable\nasync function populateGoogleCalendarWithAirtableRecords(calendarId, calendarName, session, signOut, setAddedRecords, setFailedRecords, setRateLimitInfo) {\n  console.log(`Populating Google Calendar (${calendarName}) with Airtable records...`);\n\n  const airtableEvents = await fetchAirtableEvents();\n  const added = [];\n  const failed = [];\n\n  for (const event of airtableEvents) {\n    // Skip events where the branch is \"Unknown\" or does not match the calendar name\n    if (event.branch.toLowerCase() === 'unknown' || event.branch.toLowerCase() !== calendarName.toLowerCase()) {\n      console.log(`Skipping event \"${event.title}\" due to branch \"${event.branch}\" not matching \"${calendarName}\" or being \"Unknown\"`);\n      continue;\n    }\n\n    if (event.googleEventId) {\n      console.log(`Skipping already synced event: ${event.title}`);\n      continue;\n    }\n\n    const isDuplicate = await checkForDuplicateEvent(event, calendarId, session);\n    if (isDuplicate) {\n      console.log(`Duplicate event found: \"${event.title}\". Skipping...`);\n      failed.push(event.title);\n      continue;\n    }\n\n    const googleEventId = await createGoogleCalendarEvent(event, calendarId, session, signOut, setRateLimitInfo);\n    if (googleEventId) {\n      console.log('New Google Event ID created:', googleEventId);\n      await updateAirtableWithGoogleEventId(event.id, googleEventId);\n      added.push(event.title);\n    } else {\n      failed.push(event.title);\n    }\n\n    // Introduce a delay of 1 second between requests\n    await sleep(1000);\n  }\n\n  setAddedRecords(prev => [...prev, ...added]);\n  setFailedRecords(prev => [...prev, ...failed]);\n\n  console.log(`Finished populating Google Calendar (${calendarName}) with Airtable records.`);\n}\n\n// Component to display each calendar section with countdown\nfunction CalendarSection({ calendarId, calendarName, session, signOut, setAddedRecords, setFailedRecords, setRateLimitInfo }) {\n  const [lastSyncTime, setLastSyncTime] = useState(null);\n  const [timeUntilNextSync, setTimeUntilNextSync] = useState(0);\n\n  useEffect(() => {\n    const calculateTimeUntilNextSync = () => {\n      const now = new Date();\n      if (lastSyncTime) {\n        const elapsed = now - lastSyncTime;\n        const remainingTime = 450000 - elapsed; // 450,000 ms = 7.5 minutes\n        setTimeUntilNextSync(Math.max(0, remainingTime));\n      }\n    };\n\n    const syncEvents = () => {\n      const now = new Date();\n\n      // Calculate time since last sync\n      if (lastSyncTime && (now - lastSyncTime) < 450000) {\n        calculateTimeUntilNextSync();\n        return;\n      }\n\n      if (session) {\n        if (!session.provider_token) {\n          console.error('No valid session token found. Logging out.');\n          signOut();\n          return;\n        }\n\n        populateGoogleCalendarWithAirtableRecords(\n          calendarId, \n          calendarName, \n          session, \n          signOut, \n          setAddedRecords, \n          setFailedRecords, \n          setRateLimitInfo\n        )\n          .then(() => {\n            console.log(`Finished syncing Airtable events to Google Calendar (${calendarName})`);\n            setLastSyncTime(new Date());  // Update last sync time\n            setTimeUntilNextSync(450000);  // Reset countdown\n          })\n          .catch(error => console.error(`Error syncing Airtable to Google Calendar (${calendarName}):`, error));\n      }\n    };\n\n    // Run syncEvents immediately when the component mounts\n    syncEvents();\n\n    // Set up an interval to run syncEvents every 6.6 minutes (400000 ms)\n    const intervalId = setInterval(syncEvents, 400000);\n\n    // Update countdown every second\n    const countdownInterval = setInterval(() => {\n      calculateTimeUntilNextSync();\n    }, 1000);\n\n    // Clear the intervals when the component unmounts\n    return () => {\n      clearInterval(intervalId);\n      clearInterval(countdownInterval);\n    };\n  }, [session, signOut, calendarId, calendarName, setAddedRecords, setFailedRecords, setRateLimitInfo, lastSyncTime]);\n\n  // Convert milliseconds to mm:ss format\n  const formatTime = (ms) => {\n    const totalSeconds = Math.floor(ms / 1000);\n    const minutes = Math.floor(totalSeconds / 60);\n    const seconds = totalSeconds % 60;\n    return `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;\n  };\n\n  return (\n    <div className=\"calendar-item\">\n      <h2>{calendarName}</h2>\n      {timeUntilNextSync > 0 ? (\n        <p>Next sync available in: {formatTime(timeUntilNextSync)}</p>\n      ) : (\n        <p>Ready to sync!</p>\n      )}\n    </div>\n  );\n}\n\n// Main App component\nfunction App() {\n  const session = useSession();\n  const supabase = useSupabaseClient();\n  const { isLoading } = useSessionContext();\n\n  const [addedRecords, setAddedRecords] = useState([]);\n  const [failedRecords, setFailedRecords] = useState([]);\n  const [rateLimitInfo, setRateLimitInfo] = useState({ remaining: null, limit: null, reset: null });\n\n  useEffect(() => {\n    // Fetch existing records from Airtable or another source if needed\n    async function fetchExistingRecords() {\n      const existingAddedRecords = await fetchAddedRecordsFromAirtable();\n      const existingFailedRecords = await fetchFailedRecordsFromAirtable();\n\n      setAddedRecords(existingAddedRecords);\n      setFailedRecords(existingFailedRecords);\n    }\n\n    fetchExistingRecords();\n  }, []);\n\n  const calendarInfo = [\n    { id: 'c_d113e252e0e5c8cfbf17a13149707a30d3c0fbeeff1baaac7a46940c2cc448ca@group.calendar.google.com', name: 'Charleston' },\n    { id: 'c_03867438b82e5dfd8d4d3b6096c8eb1c715425fa012054cc95f8dea7ef41c79b@group.calendar.google.com', name: 'Greensboro' },\n    { id: 'c_ad562073f4db2c47279af5aa40e53fc2641b12ad2497ccd925feb220a0f1abee@group.calendar.google.com', name: 'Myrtle Beach' },\n    { id: 'c_45db4e963c3363676038697855d7aacfd1075da441f9308e44714768d4a4f8de@group.calendar.google.com', name: 'Wilmington' },\n    { id: 'https://calendar.google.com/calendar/embed?src=c_0476130ac741b9c58b404c737a8068a8b1b06ba1de2a84cff08c5d15ced54edf%40group.calendar.google.com&ctz=America%2FToronto', name: 'Grenville'},\n    { id: 'https://calendar.google.com/calendar/embed?src=c_df033dd6c81bb3cbb5c6fdfd58dd2931e145e061b8a04ea0c13c79963cb6d515%40group.calendar.google.com&ctz=America%2FToronto', name: 'Columbia'},\n    { id: 'warranty@vanirinstalledsales.com', name: 'Raleigh' }\n  ].sort((a, b) => a.name.localeCompare(b.name));\n\n  const handleManualSync = async () => {\n    if (!session) return;\n\n    for (const calendar of calendarInfo) {\n      await populateGoogleCalendarWithAirtableRecords(\n        calendar.id,\n        calendar.name,\n        session,\n        () => supabase.auth.signOut(),\n        setAddedRecords,\n        setFailedRecords,\n        setRateLimitInfo\n      );\n    }\n  };\n\n  if (isLoading) {\n    return <div>Loading...</div>;\n  }\n\n  return (\n    <div className=\"App\">\n      <div className=\"container\">\n        <h1>Warranty Calendar</h1>\n        <div style={{ width: \"100%\", margin: \"0 auto\" }}>\n          {session ?\n            <>\n              <h2>{getGreeting()} {session.user.email}</h2>\n              <hr />\n              <div className=\"calendar-grid\">\n                {calendarInfo.map(calendar => (\n                  <CalendarSection\n                    key={calendar.id}\n                    calendarId={calendar.id}\n                    calendarName={calendar.name}\n                    session={session}\n                    signOut={() => supabase.auth.signOut()}\n                    setAddedRecords={setAddedRecords}\n                    setFailedRecords={setFailedRecords}\n                    setRateLimitInfo={setRateLimitInfo}\n                  />\n                ))}\n              </div>\n              <div className=\"records-summary\">\n                <h3>Records Summary</h3>\n                <div className=\"summary-container\">\n                  <div className=\"added-records\">\n                    <h4>Successfully Added Records:</h4>\n                    {addedRecords.length > 0 ? (\n                      <ul>\n                        {addedRecords.map((record, index) => (\n                          <li key={index}>{record}</li>\n                        ))}\n                      </ul>\n                    ) : (\n                      <p>No records added.</p>\n                    )}\n                  </div>\n                  <div className=\"failed-records\">\n                    <h4>Failed to Add Records:</h4>\n                    {failedRecords.length > 0 ? (\n                      <ul>\n                        {failedRecords.map((record, index) => (\n                          <li key={index}>{record}</li>\n                        ))}\n                      </ul>\n                    ) : (\n                      <p>No records failed.</p>\n                    )}\n                  </div>\n                </div>\n              </div>\n              <div className=\"rate-limit-info\">\n                <h4>Google Calendar API Rate Limit Information:</h4>\n                {rateLimitInfo.limit !== null ? (\n                  <ul>\n                    <li>Limit: {rateLimitInfo.limit}</li>\n                    <li>Remaining: {rateLimitInfo.remaining}</li>\n                    <li>Reset Time: {new Date(rateLimitInfo.reset * 1000).toLocaleTimeString()}</li>\n                  </ul>\n                ) : (\n                  <p>No rate limit information available.</p>\n                )}\n              </div>\n              <button onClick={handleManualSync}>Sync Data Now</button>\n              <p></p>\n              <button onClick={() => supabase.auth.signOut()}>Sign Out</button>\n            </>\n            :\n            <>\n              <button onClick={() => supabase.auth.signInWithOAuth({ provider: 'google', options: { scopes: 'https://www.googleapis.com/auth/calendar' } })}>\n                Sign In With Google\n              </button>\n            </>\n          }\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}