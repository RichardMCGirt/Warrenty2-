{"ast":null,"code":"import _createForOfIteratorHelper from\"/Users/richardmcgirt/Desktop/Warrenty2-/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _toConsumableArray from\"/Users/richardmcgirt/Desktop/Warrenty2-/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/richardmcgirt/Desktop/Warrenty2-/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _slicedToArray from\"/Users/richardmcgirt/Desktop/Warrenty2-/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _asyncToGenerator from\"/Users/richardmcgirt/Desktop/Warrenty2-/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useState,useEffect}from'react';import'./App.css';import{useSession,useSupabaseClient,useSessionContext}from'@supabase/auth-helpers-react';import DateTimePicker from'react-datetime-picker';import Calendar from'react-calendar';import'react-calendar/dist/Calendar.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function delay(ms){return new Promise(function(resolve){return setTimeout(resolve,ms);});}function patchGoogleCalendarEvent(_x,_x2,_x3,_x4){return _patchGoogleCalendarEvent.apply(this,arguments);}function _patchGoogleCalendarEvent(){_patchGoogleCalendarEvent=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(event,calendarId,session,signOut){var googleEventId,url,updatedEvent;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:console.log('Attempting to patch Google Calendar event:',event);if(session.provider_token){_context3.next=5;break;}console.error('No valid session token available. Logging out.');signOut();return _context3.abrupt(\"return\");case 5:if(event.googleEventId){_context3.next=15;break;}console.log('No googleEventId found for event. Creating a new event:',event);_context3.next=9;return createGoogleCalendarEvent(event,calendarId,session,signOut);case 9:googleEventId=_context3.sent;if(!googleEventId){_context3.next=14;break;}console.log('New Google Event ID created:',googleEventId);_context3.next=14;return updateAirtableWithGoogleEventId(event.id,googleEventId);case 14:return _context3.abrupt(\"return\");case 15:url=\"https://www.googleapis.com/calendar/v3/calendars/\".concat(calendarId,\"/events/\").concat(event.googleEventId);console.log('Patching event at URL:',url);updatedEvent={summary:event.title,description:event.description,start:{dateTime:event.start.toISOString()},end:{dateTime:event.end.toISOString()},location:\"\".concat(event.streetAddress,\", \").concat(event.city,\", \").concat(event.state,\", \").concat(event.zipCode)};console.log('Updated event data:',updatedEvent);_context3.next=21;return fetch(url,{method:'PATCH',headers:{'Authorization':'Bearer '+session.provider_token,'Content-Type':'application/json'},body:JSON.stringify(updatedEvent)}).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(data){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:console.log('Google Calendar API response for patch:',data);if(!data.error){_context2.next=10;break;}console.error('Error updating event:',data.error);if(!(data.error.status===\"PERMISSION_DENIED\"&&data.error.message.includes('Quota exceeded'))){_context2.next=8;break;}console.log('Rate limit exceeded, retrying after delay...');_context2.next=7;return delay(10000);case 7:return _context2.abrupt(\"return\",patchGoogleCalendarEvent(event,calendarId,session,signOut));case 8:_context2.next=11;break;case 10:console.log('Event successfully updated:',data);case 11:case\"end\":return _context2.stop();}},_callee2);}));return function(_x16){return _ref3.apply(this,arguments);};}()).catch(function(error){return console.error('Error during fetch request:',error);});case 21:case\"end\":return _context3.stop();}},_callee3);}));return _patchGoogleCalendarEvent.apply(this,arguments);}function createGoogleCalendarEvent(_x5,_x6,_x7,_x8){return _createGoogleCalendarEvent.apply(this,arguments);}function _createGoogleCalendarEvent(){_createGoogleCalendarEvent=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(event,calendarId,session,signOut){var url,newEvent;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:console.log('Attempting to create a new Google Calendar event:',event);if(session.provider_token){_context4.next=5;break;}console.error('No valid session token available. Logging out.');signOut();return _context4.abrupt(\"return\",null);case 5:url=\"https://www.googleapis.com/calendar/v3/calendars/\".concat(calendarId,\"/events\");newEvent={summary:event.title,description:event.description,start:{dateTime:event.start.toISOString()},end:{dateTime:event.end.toISOString()},location:\"\".concat(event.streetAddress,\", \").concat(event.city,\", \").concat(event.state,\", \").concat(event.zipCode)};console.log('New event data:',newEvent);_context4.next=10;return fetch(url,{method:'POST',headers:{'Authorization':'Bearer '+session.provider_token,'Content-Type':'application/json'},body:JSON.stringify(newEvent)}).then(function(response){return response.json();}).then(function(data){console.log('Google Calendar creation response:',data);if(data.error){console.error('Error creating event:',data.error);return null;}else{console.log('New event successfully created:',data);return data.id;}}).catch(function(error){return console.error('Error during fetch request:',error);});case 10:return _context4.abrupt(\"return\",_context4.sent);case 11:case\"end\":return _context4.stop();}},_callee4);}));return _createGoogleCalendarEvent.apply(this,arguments);}function updateAirtableWithGoogleEventId(_x9,_x10){return _updateAirtableWithGoogleEventId.apply(this,arguments);}function _updateAirtableWithGoogleEventId(){_updateAirtableWithGoogleEventId=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(airtableRecordId,googleEventId){var url,updateData;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:console.log('Updating Airtable with new Google Event ID:',googleEventId);url=\"https://api.airtable.com/v0/appO21PVRA4Qa087I/tbl6EeKPsNuEvt5yJ/\".concat(airtableRecordId);updateData={fields:{GoogleEventId:googleEventId}};console.log('Airtable update data:',updateData);_context5.next=6;return fetch(url,{method:'PATCH',headers:{'Authorization':'Bearer patXTUS9m8os14OO1.6a81b7bc4dd88871072fe71f28b568070cc79035bc988de3d4228d52239c8238','Content-Type':'application/json'},body:JSON.stringify(updateData)}).then(function(response){return response.json();}).then(function(data){console.log('Airtable API response for update:',data);if(data.error){console.error('Error updating Airtable with Google Event ID:',data.error);}else{console.log('Airtable record successfully updated:',data);}}).catch(function(error){return console.error('Error during fetch request:',error);});case 6:return _context5.abrupt(\"return\",_context5.sent);case 7:case\"end\":return _context5.stop();}},_callee5);}));return _updateAirtableWithGoogleEventId.apply(this,arguments);}function fetchAirtableEvents(){return _fetchAirtableEvents.apply(this,arguments);}function _fetchAirtableEvents(){_fetchAirtableEvents=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(){var url,response,data;return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:console.log('Fetching events from Airtable');url=\"https://api.airtable.com/v0/appO21PVRA4Qa087I/tbl6EeKPsNuEvt5yJ\";_context6.next=4;return fetch(url,{headers:{'Authorization':'Bearer patXTUS9m8os14OO1.6a81b7bc4dd88871072fe71f28b568070cc79035bc988de3d4228d52239c8238','Content-Type':'application/json'}});case 4:response=_context6.sent;_context6.next=7;return response.json();case 7:data=_context6.sent;console.log('Fetched data from Airtable:',data);return _context6.abrupt(\"return\",data.records.filter(function(record){return record.fields['Calendar Event Name']&&record.fields['startDate']&&record.fields['endDate'];})// Skip empty records\n.map(function(record){return{id:record.id,title:record.fields['Calendar Event Name']||\"Untitled Event\",start:new Date(record.fields['startDate']),end:new Date(record.fields['endDate']),description:record.fields['Billable Reason (If Billable)']||'',branch:record.fields['b']||'Unknown',homeownerName:record.fields['Homeowner Name']||'Unknown',streetAddress:record.fields['Street Address']||'Unknown',city:record.fields['City']||'Unknown',state:record.fields['State']||'Unknown',zipCode:record.fields['Zip Code']||'Unknown',picturesOfIssue:record.fields['Picture(s) of Issue']||'',calendarLink:record.fields['Calendar Link']||'',vendorEmail:record.fields['Vendor Email']||'',googleEventId:record.fields['GoogleEventId']||null};}));case 10:case\"end\":return _context6.stop();}},_callee6);}));return _fetchAirtableEvents.apply(this,arguments);}function fetchFutureGoogleEvents(_x11,_x12){return _fetchFutureGoogleEvents.apply(this,arguments);}function _fetchFutureGoogleEvents(){_fetchFutureGoogleEvents=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(calendarId,session){var now,url,allEvents,pageToken,response,data,events;return _regeneratorRuntime().wrap(function _callee7$(_context7){while(1)switch(_context7.prev=_context7.next){case 0:now=new Date().toISOString();url=\"https://www.googleapis.com/calendar/v3/calendars/\".concat(calendarId,\"/events?timeMin=\").concat(now);console.log('Fetching future Google Calendar events:',url);allEvents=[];pageToken='';case 5:_context7.next=7;return fetch(\"\".concat(url,\"&pageToken=\").concat(pageToken),{headers:{'Authorization':'Bearer '+session.provider_token}});case 7:response=_context7.sent;_context7.next=10;return response.json();case 10:data=_context7.sent;if(!data.error){_context7.next=14;break;}console.error('Error fetching Google Calendar events:',data.error);return _context7.abrupt(\"return\",[]);case 14:events=data.items.map(function(event){var _event$start,_event$start2,_event$end,_event$end2;var start=(_event$start=event.start)!==null&&_event$start!==void 0&&_event$start.dateTime?new Date(event.start.dateTime):(_event$start2=event.start)!==null&&_event$start2!==void 0&&_event$start2.date?new Date(event.start.date):null;var end=(_event$end=event.end)!==null&&_event$end!==void 0&&_event$end.dateTime?new Date(event.end.dateTime):(_event$end2=event.end)!==null&&_event$end2!==void 0&&_event$end2.date?new Date(event.end.date):null;return{googleEventId:event.id,title:event.summary||\"Untitled Event\",start:start,end:end,description:event.description||'',location:event.location||''};});allEvents=[].concat(_toConsumableArray(allEvents),_toConsumableArray(events));pageToken=data.nextPageToken||'';case 17:if(pageToken){_context7.next=5;break;}case 18:return _context7.abrupt(\"return\",allEvents);case 19:case\"end\":return _context7.stop();}},_callee7);}));return _fetchFutureGoogleEvents.apply(this,arguments);}function populateAirtableWithGoogleEvents(_x13){return _populateAirtableWithGoogleEvents.apply(this,arguments);}function _populateAirtableWithGoogleEvents(){_populateAirtableWithGoogleEvents=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(googleEvents){var _iterator,_step,event,searchUrl,searchResponse,searchData,recordId,airtableRecord,url;return _regeneratorRuntime().wrap(function _callee8$(_context8){while(1)switch(_context8.prev=_context8.next){case 0:_iterator=_createForOfIteratorHelper(googleEvents);_context8.prev=1;_iterator.s();case 3:if((_step=_iterator.n()).done){_context8.next=23;break;}event=_step.value;searchUrl=\"https://api.airtable.com/v0/appO21PVRA4Qa087I/tbl6EeKPsNuEvt5yJ?filterByFormula={Street Address}=\\\"\".concat(event.location,\"\\\"\");_context8.next=8;return fetch(searchUrl,{headers:{'Authorization':'Bearer patXTUS9m8os14OO1.6a81b7bc4dd88871072fe71f28b568070cc79035bc988de3d4228d52239c8238','Content-Type':'application/json'}});case 8:searchResponse=_context8.sent;_context8.next=11;return searchResponse.json();case 11:searchData=_context8.sent;if(!(searchData.records&&searchData.records.length>0)){_context8.next=20;break;}recordId=searchData.records[0].id;airtableRecord={fields:{\"startDate\":event.start.toISOString(),\"endDate\":event.end.toISOString(),\"GoogleEventId\":event.googleEventId,\"description\":event.description,\"location\":event.location}};url=\"https://api.airtable.com/v0/appO21PVRA4Qa087I/tbl6EeKPsNuEvt5yJ/\".concat(recordId);_context8.next=18;return fetch(url,{method:'PATCH',headers:{'Authorization':'Bearer patXTUS9m8os14OO1.6a81b7bc4dd88871072fe71f28b568070cc79035bc988de3d4228d52239c8238','Content-Type':'application/json'},body:JSON.stringify(airtableRecord)}).then(function(response){return response.json();}).then(function(data){console.log('Airtable record successfully updated:',data);}).catch(function(error){return console.error('Error during fetch request:',error);});case 18:_context8.next=21;break;case 20:console.log(\"No matching record found for Street Address: \".concat(event.location,\". No action taken.\"));case 21:_context8.next=3;break;case 23:_context8.next=28;break;case 25:_context8.prev=25;_context8.t0=_context8[\"catch\"](1);_iterator.e(_context8.t0);case 28:_context8.prev=28;_iterator.f();return _context8.finish(28);case 31:case\"end\":return _context8.stop();}},_callee8,null,[[1,25,28,31]]);}));return _populateAirtableWithGoogleEvents.apply(this,arguments);}function populateGoogleCalendarWithAirtableRecords(_x14,_x15){return _populateGoogleCalendarWithAirtableRecords.apply(this,arguments);}function _populateGoogleCalendarWithAirtableRecords(){_populateGoogleCalendarWithAirtableRecords=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee10(calendarId,session){var airtableEvents,_iterator2,_step2,_loop,_ret;return _regeneratorRuntime().wrap(function _callee10$(_context11){while(1)switch(_context11.prev=_context11.next){case 0:console.log('Populating Google Calendar with Airtable records...');_context11.next=3;return fetchAirtableEvents();case 3:airtableEvents=_context11.sent;_iterator2=_createForOfIteratorHelper(airtableEvents);_context11.prev=5;_loop=/*#__PURE__*/_regeneratorRuntime().mark(function _loop(){var event,newEvent;return _regeneratorRuntime().wrap(function _loop$(_context10){while(1)switch(_context10.prev=_context10.next){case 0:event=_step2.value;if(!event.googleEventId){_context10.next=4;break;}console.log(\"Skipping already synced event: \".concat(event.title));return _context10.abrupt(\"return\",\"continue\");case 4:newEvent={summary:event.title,description:event.description,start:{dateTime:event.start.toISOString()},end:{dateTime:event.end.toISOString()},location:\"\".concat(event.streetAddress,\", \").concat(event.city,\", \").concat(event.state,\", \").concat(event.zipCode)};console.log('Creating new Google Calendar event:',newEvent);_context10.next=8;return fetch(\"https://www.googleapis.com/calendar/v3/calendars/\".concat(calendarId,\"/events\"),{method:'POST',headers:{'Authorization':'Bearer '+session.provider_token,'Content-Type':'application/json'},body:JSON.stringify(newEvent)}).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee9(data){return _regeneratorRuntime().wrap(function _callee9$(_context9){while(1)switch(_context9.prev=_context9.next){case 0:console.log('Google Calendar API response:',data);if(!data.error){_context9.next=5;break;}console.error('Error creating event:',data.error);_context9.next=8;break;case 5:console.log('New event successfully created in Google Calendar:',data);_context9.next=8;return updateAirtableWithGoogleEventId(event.id,data.id);case 8:case\"end\":return _context9.stop();}},_callee9);}));return function(_x17){return _ref4.apply(this,arguments);};}()).catch(function(error){return console.error('Error during Google Calendar API call:',error);});case 8:case\"end\":return _context10.stop();}},_loop);});_iterator2.s();case 8:if((_step2=_iterator2.n()).done){_context11.next=15;break;}return _context11.delegateYield(_loop(),\"t0\",10);case 10:_ret=_context11.t0;if(!(_ret===\"continue\")){_context11.next=13;break;}return _context11.abrupt(\"continue\",13);case 13:_context11.next=8;break;case 15:_context11.next=20;break;case 17:_context11.prev=17;_context11.t1=_context11[\"catch\"](5);_iterator2.e(_context11.t1);case 20:_context11.prev=20;_iterator2.f();return _context11.finish(20);case 23:console.log('Finished populating Google Calendar with Airtable records.');case 24:case\"end\":return _context11.stop();}},_callee10,null,[[5,17,20,23]]);}));return _populateGoogleCalendarWithAirtableRecords.apply(this,arguments);}function CalendarSection(_ref){var calendarId=_ref.calendarId,calendarName=_ref.calendarName,session=_ref.session,signOut=_ref.signOut;var _useState=useState(new Date()),_useState2=_slicedToArray(_useState,2),start=_useState2[0],setStart=_useState2[1];var _useState3=useState(new Date()),_useState4=_slicedToArray(_useState3,2),end=_useState4[0],setEnd=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),eventName=_useState6[0],setEventName=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),eventDescription=_useState8[0],setEventDescription=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),events=_useState10[0],setEvents=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),selectedDate=_useState12[0],setSelectedDate=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),selectedEvents=_useState14[0],setSelectedEvents=_useState14[1];var _useState15=useState(null),_useState16=_slicedToArray(_useState15,2),editingEvent=_useState16[0],setEditingEvent=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),showInputs=_useState18[0],setShowInputs=_useState18[1];useEffect(function(){console.log('Session state:',session);if(session){if(!session.provider_token){console.error('No valid session token found. Logging out.');signOut();return;}fetchFutureGoogleEvents(calendarId,session).then(function(googleEvents){console.log('Fetched Google Calendar future events:',googleEvents);populateAirtableWithGoogleEvents(googleEvents).then(function(){return console.log('Finished populating Airtable with Google Events');}).catch(function(error){return console.error('Error populating Airtable:',error);});}).catch(function(error){return console.error('Error fetching Google Calendar events:',error);});fetchAirtableEvents().then(function(airtableEvents){console.log(\"Fetched Airtable events:\",airtableEvents);airtableEvents.forEach(function(event){console.log(\"Processing event:\",event);patchGoogleCalendarEvent(event,calendarId,session,signOut);});}).catch(function(error){return console.error(\"Error fetching Airtable events:\",error);});}},[session,signOut]);function handleDateClick(date){console.log('Date clicked:',date);if(selectedDate&&selectedDate.toDateString()===date.toDateString()){setShowInputs(!showInputs);setSelectedDate(showInputs?null:date);}else{var dayEvents=events.filter(function(event){return event.start.toDateString()===date.toDateString();});console.log('Events on selected date:',dayEvents);setSelectedDate(date);setStart(date);setEnd(date);setSelectedEvents(dayEvents||[]);setEditingEvent(null);setShowInputs(true);}}function handleEventClick(event){console.log('Event clicked:',event);setEditingEvent(event);setStart(event.start);setEnd(event.end);setEventName(event.title);setEventDescription(event.description);setShowInputs(true);}function saveEvent(){return _saveEvent.apply(this,arguments);}function _saveEvent(){_saveEvent=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var event,calendarId,url,method;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:console.log('Saving event:',{eventName:eventName,eventDescription:eventDescription,start:start,end:end});event={summary:eventName,description:eventDescription,start:{dateTime:start.toISOString()},end:{dateTime:end.toISOString()}};calendarId='primary';url=\"https://www.googleapis.com/calendar/v3/calendars/\".concat(calendarId,\"/events\");method=\"POST\";if(editingEvent){url+=\"/\".concat(editingEvent.id);method=\"PUT\";}console.log('Google Calendar event save URL:',url);console.log('Method:',method);console.log('Event data to save:',event);_context.next=11;return fetch(url,{method:method,headers:{'Authorization':'Bearer '+session.provider_token,'Content-Type':'application/json'},body:JSON.stringify(event)}).then(function(response){console.log('Google Calendar save response:',response);if(!response.ok){console.error(\"Error saving event: \".concat(response.statusText));throw new Error(\"Error saving event: \".concat(response.statusText));}return response.json();}).then(function(){alert(\"Event saved!\");fetchFutureGoogleEvents(calendarId,session).then(function(googleEvents){setEvents(googleEvents);}).catch(function(error){return console.error('Error fetching Google Calendar events:',error);});resetForm();}).catch(function(error){return console.error('Error during saveEvent:',error);});case 11:case\"end\":return _context.stop();}},_callee);}));return _saveEvent.apply(this,arguments);}function resetForm(){console.log('Resetting form');setEventName(\"\");setEventDescription(\"\");setStart(new Date());setEnd(new Date());setEditingEvent(null);setShowInputs(false);}function tileContent(_ref2){var date=_ref2.date,view=_ref2.view;if(view==='month'){var dayEvents=events.filter(function(event){return event.start.toDateString()===date.toDateString();});return dayEvents.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"event-dot\"}):null;}}return/*#__PURE__*/_jsxs(\"div\",{className:\"calendar-item\",children:[/*#__PURE__*/_jsx(\"h2\",{children:calendarName}),/*#__PURE__*/_jsx(Calendar,{onClickDay:handleDateClick,value:selectedDate||new Date(),tileContent:tileContent}),selectedEvents.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Events on \",selectedDate===null||selectedDate===void 0?void 0:selectedDate.toDateString()]}),/*#__PURE__*/_jsx(\"ul\",{children:selectedEvents.map(function(event,index){return/*#__PURE__*/_jsxs(\"li\",{onClick:function onClick(){return handleEventClick(event);},children:[/*#__PURE__*/_jsx(\"strong\",{children:event.title}),/*#__PURE__*/_jsx(\"br\",{}),event.description&&/*#__PURE__*/_jsx(\"em\",{children:event.description}),/*#__PURE__*/_jsx(\"br\",{}),event.start.toLocaleTimeString(),\" - \",event.end.toLocaleTimeString()]},index);})})]}),showInputs&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Start of your event\"}),/*#__PURE__*/_jsx(DateTimePicker,{onChange:setStart,value:start}),/*#__PURE__*/_jsx(\"p\",{children:\"End of your event\"}),/*#__PURE__*/_jsx(DateTimePicker,{onChange:setEnd,value:end}),/*#__PURE__*/_jsx(\"p\",{children:\"Event name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:eventName,onChange:function onChange(e){return setEventName(e.target.value);}}),/*#__PURE__*/_jsx(\"p\",{children:\"Event description\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:eventDescription,onChange:function onChange(e){return setEventDescription(e.target.value);}}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"button\",{onClick:saveEvent,children:[editingEvent?\"Update Event\":\"Create Event\",\" in \",calendarName]}),editingEvent&&/*#__PURE__*/_jsx(\"button\",{onClick:resetForm,children:\"Cancel Editing\"})]})]});}function App(){var session=useSession();var supabase=useSupabaseClient();var _useSessionContext=useSessionContext(),isLoading=_useSessionContext.isLoading;var calendarInfo=[{id:'rmcgirt55@gmail.com',name:'rmcgirt55@gmail.com'}];var getGreeting=function getGreeting(){var currentHour=new Date().getHours();if(currentHour<12){return\"Good morning\";}else if(currentHour<18){return\"Good afternoon\";}else{return\"Good evening\";}};if(isLoading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Warranty Calendar\"}),/*#__PURE__*/_jsx(\"div\",{style:{width:\"100%\",margin:\"0 auto\"},children:session?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[getGreeting(),\" \",session.user.email]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"calendar-grid\",children:calendarInfo.map(function(calendar){return/*#__PURE__*/_jsx(CalendarSection,{calendarId:calendar.id,calendarName:calendar.name,session:session,signOut:function signOut(){return supabase.auth.signOut();}},calendar.id);})}),/*#__PURE__*/_jsx(\"p\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return supabase.auth.signOut();},children:\"Sign Out\"})]}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return supabase.auth.signInWithOAuth({provider:'google',options:{scopes:'https://www.googleapis.com/auth/calendar'}});},children:\"Sign In With Google\"})})})]})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","useSession","useSupabaseClient","useSessionContext","DateTimePicker","Calendar","delay","ms","Promise","resolve","setTimeout","patchGoogleCalendarEvent","event","calendarId","session","signOut","console","log","provider_token","error","googleEventId","createGoogleCalendarEvent","updateAirtableWithGoogleEventId","id","url","updatedEvent","summary","title","description","start","dateTime","toISOString","end","location","streetAddress","city","state","zipCode","fetch","method","headers","body","JSON","stringify","then","response","json","data","status","message","includes","catch","newEvent","airtableRecordId","updateData","fields","GoogleEventId","fetchAirtableEvents","records","filter","record","map","Date","branch","homeownerName","picturesOfIssue","calendarLink","vendorEmail","fetchFutureGoogleEvents","now","allEvents","pageToken","events","items","date","nextPageToken","populateAirtableWithGoogleEvents","googleEvents","searchUrl","searchResponse","searchData","length","recordId","airtableRecord","populateGoogleCalendarWithAirtableRecords","airtableEvents","CalendarSection","calendarName","setStart","setEnd","eventName","setEventName","eventDescription","setEventDescription","setEvents","selectedDate","setSelectedDate","selectedEvents","setSelectedEvents","editingEvent","setEditingEvent","showInputs","setShowInputs","forEach","handleDateClick","toDateString","dayEvents","handleEventClick","saveEvent","ok","statusText","Error","alert","resetForm","tileContent","view","index","toLocaleTimeString","e","target","value","App","supabase","isLoading","calendarInfo","name","getGreeting","currentHour","getHours","width","margin","user","email","calendar","auth","signInWithOAuth","provider","options","scopes"],"sources":["/Users/richardmcgirt/Desktop/Warrenty2-/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport { useSession, useSupabaseClient, useSessionContext } from '@supabase/auth-helpers-react';\nimport DateTimePicker from 'react-datetime-picker';\nimport Calendar from 'react-calendar';\nimport 'react-calendar/dist/Calendar.css';\n\nfunction delay(ms) {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nasync function patchGoogleCalendarEvent(event, calendarId, session, signOut) {\n  console.log('Attempting to patch Google Calendar event:', event);\n\n  if (!session.provider_token) {\n    console.error('No valid session token available. Logging out.');\n    signOut();\n    return;\n  }\n\n  if (!event.googleEventId) {\n    console.log('No googleEventId found for event. Creating a new event:', event);\n    const googleEventId = await createGoogleCalendarEvent(event, calendarId, session, signOut);\n    if (googleEventId) {\n      console.log('New Google Event ID created:', googleEventId);\n      await updateAirtableWithGoogleEventId(event.id, googleEventId);\n    }\n    return;\n  }\n\n  const url = `https://www.googleapis.com/calendar/v3/calendars/${calendarId}/events/${event.googleEventId}`;\n  console.log('Patching event at URL:', url);\n\n  const updatedEvent = {\n    summary: event.title,\n    description: event.description,\n    start: { dateTime: event.start.toISOString() },\n    end: { dateTime: event.end.toISOString() },\n    location: `${event.streetAddress}, ${event.city}, ${event.state}, ${event.zipCode}`,\n  };\n\n  console.log('Updated event data:', updatedEvent);\n\n  await fetch(url, {\n    method: 'PATCH',\n    headers: {\n      'Authorization': 'Bearer ' + session.provider_token,\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(updatedEvent)\n  }).then(response => response.json())\n    .then(async data => {\n      console.log('Google Calendar API response for patch:', data);\n      if (data.error) {\n        console.error('Error updating event:', data.error);\n        if (data.error.status === \"PERMISSION_DENIED\" && data.error.message.includes('Quota exceeded')) {\n          console.log('Rate limit exceeded, retrying after delay...');\n          await delay(10000);\n          return patchGoogleCalendarEvent(event, calendarId, session, signOut);\n        }\n      } else {\n        console.log('Event successfully updated:', data);\n      }\n    }).catch(error => console.error('Error during fetch request:', error));\n}\n\nasync function createGoogleCalendarEvent(event, calendarId, session, signOut) {\n  console.log('Attempting to create a new Google Calendar event:', event);\n\n  if (!session.provider_token) {\n    console.error('No valid session token available. Logging out.');\n    signOut();\n    return null;\n  }\n\n  const url = `https://www.googleapis.com/calendar/v3/calendars/${calendarId}/events`;\n\n  const newEvent = {\n    summary: event.title,\n    description: event.description,\n    start: { dateTime: event.start.toISOString() },\n    end: { dateTime: event.end.toISOString() },\n    location: `${event.streetAddress}, ${event.city}, ${event.state}, ${event.zipCode}`,\n  };\n\n  console.log('New event data:', newEvent);\n\n  return await fetch(url, {\n    method: 'POST',\n    headers: {\n      'Authorization': 'Bearer ' + session.provider_token,\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(newEvent)\n  }).then(response => response.json())\n    .then(data => {\n      console.log('Google Calendar creation response:', data);\n      if (data.error) {\n        console.error('Error creating event:', data.error);\n        return null;\n      } else {\n        console.log('New event successfully created:', data);\n        return data.id;\n      }\n    }).catch(error => console.error('Error during fetch request:', error));\n}\n\nasync function updateAirtableWithGoogleEventId(airtableRecordId, googleEventId) {\n  console.log('Updating Airtable with new Google Event ID:', googleEventId);\n\n  const url = `https://api.airtable.com/v0/appO21PVRA4Qa087I/tbl6EeKPsNuEvt5yJ/${airtableRecordId}`;\n  const updateData = {\n    fields: {\n      GoogleEventId: googleEventId\n    }\n  };\n\n  console.log('Airtable update data:', updateData);\n\n  return await fetch(url, {\n    method: 'PATCH',\n    headers: {\n      'Authorization': 'Bearer patXTUS9m8os14OO1.6a81b7bc4dd88871072fe71f28b568070cc79035bc988de3d4228d52239c8238',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(updateData)\n  }).then(response => response.json())\n    .then(data => {\n      console.log('Airtable API response for update:', data);\n      if (data.error) {\n        console.error('Error updating Airtable with Google Event ID:', data.error);\n      } else {\n        console.log('Airtable record successfully updated:', data);\n      }\n    }).catch(error => console.error('Error during fetch request:', error));\n}\n\nasync function fetchAirtableEvents() {\n  console.log('Fetching events from Airtable');\n\n  const url = `https://api.airtable.com/v0/appO21PVRA4Qa087I/tbl6EeKPsNuEvt5yJ`;\n  const response = await fetch(url, {\n    headers: {\n      'Authorization': 'Bearer patXTUS9m8os14OO1.6a81b7bc4dd88871072fe71f28b568070cc79035bc988de3d4228d52239c8238',\n      'Content-Type': 'application/json'\n    }\n  });\n\n  const data = await response.json();\n  console.log('Fetched data from Airtable:', data);\n\n  return data.records\n    .filter(record => record.fields['Calendar Event Name'] && record.fields['startDate'] && record.fields['endDate']) // Skip empty records\n    .map(record => ({\n      id: record.id,\n      title: record.fields['Calendar Event Name'] || \"Untitled Event\",\n      start: new Date(record.fields['startDate']),\n      end: new Date(record.fields['endDate']),\n      description: record.fields['Billable Reason (If Billable)'] || '',\n      branch: record.fields['b'] || 'Unknown',\n      homeownerName: record.fields['Homeowner Name'] || 'Unknown',\n      streetAddress: record.fields['Street Address'] || 'Unknown',\n      city: record.fields['City'] || 'Unknown',\n      state: record.fields['State'] || 'Unknown',\n      zipCode: record.fields['Zip Code'] || 'Unknown',\n      picturesOfIssue: record.fields['Picture(s) of Issue'] || '',\n      calendarLink: record.fields['Calendar Link'] || '',\n      vendorEmail: record.fields['Vendor Email'] || '',\n      googleEventId: record.fields['GoogleEventId'] || null,\n    }));\n}\n\nasync function fetchFutureGoogleEvents(calendarId, session) {\n  const now = new Date().toISOString();\n  const url = `https://www.googleapis.com/calendar/v3/calendars/${calendarId}/events?timeMin=${now}`;\n  console.log('Fetching future Google Calendar events:', url);\n\n  let allEvents = [];\n  let pageToken = '';\n\n  do {\n    const response = await fetch(`${url}&pageToken=${pageToken}`, {\n      headers: {\n        'Authorization': 'Bearer ' + session.provider_token\n      }\n    });\n\n    const data = await response.json();\n    if (data.error) {\n      console.error('Error fetching Google Calendar events:', data.error);\n      return [];\n    }\n\n    const events = data.items.map(event => {\n      const start = event.start?.dateTime ? new Date(event.start.dateTime) : event.start?.date ? new Date(event.start.date) : null;\n      const end = event.end?.dateTime ? new Date(event.end.dateTime) : event.end?.date ? new Date(event.end.date) : null;\n\n      return {\n        googleEventId: event.id,\n        title: event.summary || \"Untitled Event\",\n        start: start,\n        end: end,\n        description: event.description || '',\n        location: event.location || '',\n      };\n    });\n\n    allEvents = [...allEvents, ...events];\n    pageToken = data.nextPageToken || '';\n  } while (pageToken);\n\n  return allEvents;\n}\n\nasync function populateAirtableWithGoogleEvents(googleEvents) {\n  for (const event of googleEvents) {\n    const searchUrl = `https://api.airtable.com/v0/appO21PVRA4Qa087I/tbl6EeKPsNuEvt5yJ?filterByFormula={Street Address}=\"${event.location}\"`;\n\n    const searchResponse = await fetch(searchUrl, {\n      headers: {\n        'Authorization': 'Bearer patXTUS9m8os14OO1.6a81b7bc4dd88871072fe71f28b568070cc79035bc988de3d4228d52239c8238',\n        'Content-Type': 'application/json'\n      }\n    });\n\n    const searchData = await searchResponse.json();\n\n    if (searchData.records && searchData.records.length > 0) {\n      const recordId = searchData.records[0].id;\n\n      const airtableRecord = {\n        fields: {\n          \"startDate\": event.start.toISOString(),\n          \"endDate\": event.end.toISOString(),\n          \"GoogleEventId\": event.googleEventId,\n          \"description\": event.description,\n          \"location\": event.location,\n        }\n      };\n\n      const url = `https://api.airtable.com/v0/appO21PVRA4Qa087I/tbl6EeKPsNuEvt5yJ/${recordId}`;\n\n      await fetch(url, {\n        method: 'PATCH',\n        headers: {\n          'Authorization': 'Bearer patXTUS9m8os14OO1.6a81b7bc4dd88871072fe71f28b568070cc79035bc988de3d4228d52239c8238',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(airtableRecord)\n      }).then(response => response.json())\n        .then(data => {\n          console.log('Airtable record successfully updated:', data);\n        }).catch(error => console.error('Error during fetch request:', error));\n    } else {\n      console.log(`No matching record found for Street Address: ${event.location}. No action taken.`);\n    }\n  }\n}\n\nasync function populateGoogleCalendarWithAirtableRecords(calendarId, session) {\n  console.log('Populating Google Calendar with Airtable records...');\n\n  const airtableEvents = await fetchAirtableEvents();\n\n  for (const event of airtableEvents) {\n    if (event.googleEventId) {\n      console.log(`Skipping already synced event: ${event.title}`);\n      continue;\n    }\n\n    const newEvent = {\n      summary: event.title,\n      description: event.description,\n      start: { dateTime: event.start.toISOString() },\n      end: { dateTime: event.end.toISOString() },\n      location: `${event.streetAddress}, ${event.city}, ${event.state}, ${event.zipCode}`,\n    };\n\n    console.log('Creating new Google Calendar event:', newEvent);\n\n    await fetch(`https://www.googleapis.com/calendar/v3/calendars/${calendarId}/events`, {\n      method: 'POST',\n      headers: {\n        'Authorization': 'Bearer ' + session.provider_token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(newEvent)\n    })\n    .then(response => response.json())\n    .then(async data => {\n      console.log('Google Calendar API response:', data);\n      if (data.error) {\n        console.error('Error creating event:', data.error);\n      } else {\n        console.log('New event successfully created in Google Calendar:', data);\n        await updateAirtableWithGoogleEventId(event.id, data.id);\n      }\n    })\n    .catch(error => console.error('Error during Google Calendar API call:', error));\n  }\n\n  console.log('Finished populating Google Calendar with Airtable records.');\n}\n\nfunction CalendarSection({ calendarId, calendarName, session, signOut }) {\n  const [start, setStart] = useState(new Date());\n  const [end, setEnd] = useState(new Date());\n  const [eventName, setEventName] = useState(\"\");\n  const [eventDescription, setEventDescription] = useState(\"\");\n  const [events, setEvents] = useState([]);\n  const [selectedDate, setSelectedDate] = useState(null);\n  const [selectedEvents, setSelectedEvents] = useState([]);\n  const [editingEvent, setEditingEvent] = useState(null);\n  const [showInputs, setShowInputs] = useState(false);\n\n  useEffect(() => {\n    console.log('Session state:', session);\n    if (session) {\n      if (!session.provider_token) {\n        console.error('No valid session token found. Logging out.');\n        signOut();\n        return;\n      }\n\n      fetchFutureGoogleEvents(calendarId, session)\n        .then(googleEvents => {\n          console.log('Fetched Google Calendar future events:', googleEvents);\n\n          populateAirtableWithGoogleEvents(googleEvents)\n            .then(() => console.log('Finished populating Airtable with Google Events'))\n            .catch(error => console.error('Error populating Airtable:', error));\n        })\n        .catch(error => console.error('Error fetching Google Calendar events:', error));\n\n      fetchAirtableEvents().then(airtableEvents => {\n        console.log(\"Fetched Airtable events:\", airtableEvents);\n        airtableEvents.forEach(event => {\n          console.log(\"Processing event:\", event);\n          patchGoogleCalendarEvent(event, calendarId, session, signOut);\n        });\n      }).catch(error => console.error(\"Error fetching Airtable events:\", error));\n    }\n  }, [session, signOut]);\n\n  function handleDateClick(date) {\n    console.log('Date clicked:', date);\n    if (selectedDate && selectedDate.toDateString() === date.toDateString()) {\n      setShowInputs(!showInputs);\n      setSelectedDate(showInputs ? null : date);\n    } else {\n      const dayEvents = events.filter(\n        event => event.start.toDateString() === date.toDateString()\n      );\n      console.log('Events on selected date:', dayEvents);\n      setSelectedDate(date);\n      setStart(date);\n      setEnd(date);\n      setSelectedEvents(dayEvents || []);\n      setEditingEvent(null);\n      setShowInputs(true);\n    }\n  }\n\n  function handleEventClick(event) {\n    console.log('Event clicked:', event);\n    setEditingEvent(event);\n    setStart(event.start);\n    setEnd(event.end);\n    setEventName(event.title);\n    setEventDescription(event.description);\n    setShowInputs(true);\n  }\n\n  async function saveEvent() {\n    console.log('Saving event:', { eventName, eventDescription, start, end });\n\n    const event = {\n      summary: eventName,\n      description: eventDescription,\n      start: { dateTime: start.toISOString() },\n      end: { dateTime: end.toISOString() },\n    };\n  \n    let calendarId = 'primary';\n    let url = `https://www.googleapis.com/calendar/v3/calendars/${calendarId}/events`;\n    let method = \"POST\";\n  \n    if (editingEvent) {\n      url += `/${editingEvent.id}`;\n      method = \"PUT\";\n    }\n\n    console.log('Google Calendar event save URL:', url);\n    console.log('Method:', method);\n    console.log('Event data to save:', event);\n  \n    await fetch(url, {\n      method: method,\n      headers: {\n        'Authorization': 'Bearer ' + session.provider_token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(event)\n    }).then((response) => {\n      console.log('Google Calendar save response:', response);\n      if (!response.ok) {\n        console.error(`Error saving event: ${response.statusText}`);\n        throw new Error(`Error saving event: ${response.statusText}`);\n      }\n      return response.json();\n    })\n    .then(() => {\n      alert(\"Event saved!\");\n      fetchFutureGoogleEvents(calendarId, session)\n        .then(googleEvents => {\n          setEvents(googleEvents);\n        })\n        .catch(error => console.error('Error fetching Google Calendar events:', error));\n      resetForm();\n    })\n    .catch(error => console.error('Error during saveEvent:', error));\n  }\n\n  function resetForm() {\n    console.log('Resetting form');\n    setEventName(\"\");\n    setEventDescription(\"\");\n    setStart(new Date());\n    setEnd(new Date());\n    setEditingEvent(null);\n    setShowInputs(false);\n  }\n\n  function tileContent({ date, view }) {\n    if (view === 'month') {\n      const dayEvents = events.filter(\n        event => event.start.toDateString() === date.toDateString()\n      );\n      return dayEvents.length > 0 ? <div className=\"event-dot\"></div> : null;\n    }\n  }\n\n  return (\n    <div className=\"calendar-item\">\n      <h2>{calendarName}</h2>\n      <Calendar\n        onClickDay={handleDateClick}\n        value={selectedDate || new Date()}\n        tileContent={tileContent}\n      />\n      {selectedEvents.length > 0 && (\n        <div>\n          <h3>Events on {selectedDate?.toDateString()}</h3>\n          <ul>\n            {selectedEvents.map((event, index) => (\n              <li key={index} onClick={() => handleEventClick(event)}>\n                <strong>{event.title}</strong><br />\n                {event.description && <em>{event.description}</em>}<br />\n                {event.start.toLocaleTimeString()} - {event.end.toLocaleTimeString()}\n              </li>\n            ))}\n          </ul>\n        </div>\n      )}\n      {showInputs && (\n        <>\n          <p>Start of your event</p>\n          <DateTimePicker onChange={setStart} value={start} />\n          <p>End of your event</p>\n          <DateTimePicker onChange={setEnd} value={end} />\n          <p>Event name</p>\n          <input type=\"text\" value={eventName} onChange={(e) => setEventName(e.target.value)} />\n          <p>Event description</p>\n          <input type=\"text\" value={eventDescription} onChange={(e) => setEventDescription(e.target.value)} />\n          <hr />\n          <button onClick={saveEvent}>\n            {editingEvent ? \"Update Event\" : \"Create Event\"} in {calendarName}\n          </button>\n          {editingEvent && <button onClick={resetForm}>Cancel Editing</button>}\n        </>\n      )}\n    </div>\n  );\n}\n\nfunction App() {\n  const session = useSession();\n  const supabase = useSupabaseClient();\n  const { isLoading } = useSessionContext();\n\n  const calendarInfo = [\n    { id: 'rmcgirt55@gmail.com', name: 'rmcgirt55@gmail.com' }\n  ];\n\n  const getGreeting = () => {\n    const currentHour = new Date().getHours();\n    if (currentHour < 12) {\n      return \"Good morning\";\n    } else if (currentHour < 18) {\n      return \"Good afternoon\";\n    } else {\n      return \"Good evening\";\n    }\n  };\n\n  if (isLoading) {\n    return <div>Loading...</div>;\n  }\n\n  return (\n    <div className=\"App\">\n      <div className=\"container\">\n        <h1>Warranty Calendar</h1>\n        <div style={{ width: \"100%\", margin: \"0 auto\" }}>\n          {session ?\n            <>\n              <h2>{getGreeting()} {session.user.email}</h2>\n              <hr />\n              <div className=\"calendar-grid\">\n                {calendarInfo.map(calendar => (\n                  <CalendarSection\n                    key={calendar.id}\n                    calendarId={calendar.id}\n                    calendarName={calendar.name}\n                    session={session}\n                    signOut={() => supabase.auth.signOut()}\n                  />\n                ))}\n              </div>\n              <p></p>\n              <button onClick={() => supabase.auth.signOut()}>Sign Out</button>\n            </>\n            :\n            <>\n              <button onClick={() => supabase.auth.signInWithOAuth({ provider: 'google', options: { scopes: 'https://www.googleapis.com/auth/calendar' } })}>\n                Sign In With Google\n              </button>\n            </>\n          }\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}